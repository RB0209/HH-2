/* ========= Base & Palette ========= */
:root{
  --gb-outer-1:#cfe8d3;
  --gb-outer-2:#a9d0b1;
  --gb-outer-3:#84b895;
  --gb-dark:#2c5d49;
  --gb-screen:#143f2f;
  --gb-screen-2:#0e3326;
  --pixel-ink:#0b3b2b;
  --pixel-light:#d9f1dd;
  --pixel-mid:#a2d4b0;
  --pixel-accent:#8ccaa1;
  --bevel-dark:#0b3b2b;
  --bevel-mid:#1b4d3a;
  --face:#d3f7d7;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: linear-gradient(#d7f3df, #c5ebd2);
  font-family: 'Press Start 2P', system-ui, monospace;
  color: var(--pixel-ink);
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: grayscale;
}

.wrap{
  min-height:100%;
  display:grid;
  place-items:center;
  padding:24px;
}

/* ========= Shell ========= */
.shell{
  width:min(92vw, 540px);
  aspect-ratio: 3/5.2;
  background: radial-gradient(ellipse at top left, var(--gb-outer-1), var(--gb-outer-2) 60%, var(--gb-outer-3));
  border-radius: 28px;
  position:relative;
  box-shadow:
    inset 0 0 0 4px rgba(0,0,0,.06),
    0 8px 24px rgba(0,0,0,.18),
    0 2px 1px rgba(255,255,255,.6) inset;
  padding:20px 18px 80px;
}

/* Screen frame */
.screen-frame{
  background: linear-gradient(var(--gb-dark), var(--gb-dark));
  border-radius: 18px;
  padding:12px;
  box-shadow:
    0 0 0 4px var(--gb-outer-3),
    inset 0 0 0 4px var(--bevel-mid),
    inset 0 0 0 12px var(--gb-screen-2);
}
.screen-inner{
  background: var(--gb-screen);
  border-radius: 12px;
  overflow:hidden;
  padding:10px 10px 14px;
  outline: 2px solid var(--bevel-dark);
}

/* Title + typewriter */
.title{ text-align:center; color:var(--pixel-light); }
.title h1{
  font-size: clamp(16px, 3.6vw, 32px);
  margin: 0 0 6px;
  letter-spacing:2px;
}
.title p{ margin:0 0 6px; font-size: clamp(9px, 2vw, 14px); }

.typewriter::after{
  content: attr(data-suffix);
  animation: blink 1s steps(1) infinite;
}
@keyframes blink{ 50%{ opacity:0; } }

/* Pixel scene */
.pixel-scene{ display:grid; place-items:center; margin:6px 0 8px; }
.pixel-svg{
  width:100%;
  max-width: 520px;
  height:auto;
  image-rendering: pixelated;
}
.c-sky{ fill:#0d392a; }
.c-ground{ fill:#1a4d3a; }
.c-clouds rect{ fill:#9ed6aa; }
.c-face{ fill: var(--face); }
.c-stars rect, .sprite rect, .c-moon rect{ fill:#d7f5db; }

/* Menu tiles */
.menu{
  display:grid;
  gap:8px;
  margin-top:8px;
}
.tile{
  background: var(--pixel-light);
  border:none;
  font: inherit;
  padding: 14px 10px;
  letter-spacing:1px;
  filter: drop-shadow(0 2px 0 var(--bevel-mid)) drop-shadow(0 4px 0 var(--bevel-dark));
  position:relative;
  cursor:pointer;
  image-rendering: pixelated;
}
.tile::before, .tile::after{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
}
/* Stepped pixel borders */
.tile::before{
  box-shadow:
    inset -4px -4px 0 var(--bevel-dark),
    inset 4px 4px 0 var(--pixel-accent),
    inset -8px -8px 0 var(--bevel-mid),
    inset 8px 8px 0 var(--pixel-mid);
}
.tile:focus-visible{
  outline: 3px solid #dfffe5;
  outline-offset: 2px;
}
.tile.active{
  transform: translateY(2px);
  filter: drop-shadow(0 1px 0 var(--bevel-mid)) drop-shadow(0 2px 0 var(--bevel-dark));
}
/* selected highlight theme cycle */
.theme-2 .tile.selected{ background:#d8ffe1; }
.theme-3 .tile.selected{ background:#b9f0c8; }
.tile.selected{ box-shadow: 0 0 0 3px #e8ffee inset; }

/* Controls */
.controls{
  position:absolute;
  left:18px; right:18px; bottom:14px;
  display:grid;
  grid-template-columns: 140px 1fr 140px;
  align-items:center;
  gap:10px;
}
/* D-pad */
.dpad{ width:120px; height:120px; position:relative; }
.d{ position:absolute; width:36px; height:36px; background:#345e4e; border:0; cursor:pointer; box-shadow: inset 0 0 0 3px #25493b; }
.d-up{ left:42px; top:0; border-radius:10px 10px 0 0; }
.d-down{ left:42px; bottom:0; border-radius:0 0 10px 10px; }
.d-left{ left:0; top:42px; border-radius:10px 0 0 10px; }
.d-right{ right:0; top:42px; border-radius:0 10px 10px 0; }
.d-center{ position:absolute; width:36px; height:36px; left:42px; top:42px; background:#2b5243; border-radius:8px; box-shadow: inset 0 0 0 3px #1f3f33; }

/* Middle pills */
.mid-buttons{ display:flex; gap:16px; justify-content:center; }
.pill{ background:#3b6f5b; color:#dff7e3; border:0; padding:10px 18px; border-radius:30px; box-shadow: inset 0 0 0 3px #2b5646; cursor:pointer; }

/* A/B buttons */
.ab{ display:flex; gap:22px; justify-content:flex-end; align-items:center; }
.round{ width:70px; height:70px; border-radius:50%; background:#3b6f5b; color:#dff7e3; border:0; font-size:20px; box-shadow: inset 0 0 0 6px #2b5646; cursor:pointer; }

/* Speaker */
.speaker{ position:absolute; right:16px; bottom:16px; display:flex; gap:6px; }
.speaker span{ width:8px; height:36px; background:#3d6d5b; border-radius:6px; box-shadow: inset 0 0 0 2px #2c5646; }

/* Modals */
.overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.35);
}
.modal{
  border:none;
  border-radius:14px;
  padding:18px;
  width:min(90vw, 520px);
  background:#e9fff0;
  box-shadow: 0 20px 60px rgba(0,0,0,.45);
}
.modal::backdrop{ background: transparent; }
.modal h2{ margin-top:0; }
.modal .close{
  margin-top:14px;
  background:#2f5d49; color:#e9fff0;
  border:0; padding:10px 16px; border-radius:10px; cursor:pointer;
}

/* Responsive */
@media (max-width:520px){
  .controls{ grid-template-columns: 120px 1fr 120px; }
  .round{ width:62px; height:62px; }
  .dpad{ width:104px; height:104px; }
}
